# The Hi-c project Developing notes
Developing notes for the hi-c project. Part of the notes will become documentation in the future.

## Pre-process
The original graph is a huge graph, the corresponding gexf file is 35.5GB, and the loading time is 8 hours. We need to find a way to optimize this. 
1. graph_preprocess.py: generates an .h5 file containing all the information of the graph and a .csv file containing the nodes sorted by their order in chromosomes.
2. graph_load_time_test.py: tests the time to load the orignal graph from the .h5 and .csv file. If it takes less time, we are going to use these files instead of the original .gexf file in the future.
3. recover_gexf.py: recover the .h5 file and the .csv file to .gexf file.
4. graph_isomorphism_test: test if the .gexf file generated by recover_gexf file is the same as the original file.
5. snp_map.py: generate a .json file which contains a dictionary. The keys are node ids, and the contents are the locations of the nodes.

## Steps to generate a reduced graph for a single patient
1. Load the original hi-c graph. (haven't determined which way to load yet)
2. Load the csv of the sorted nodes as a dataframe.
3. Load the SNP location map generated by snp_map.py.
4. Load the SNPs of the patient.
5. Add each of the SNP of the patient to the node-dataframe according to the map.
6. Perform the graph reduction algorithm. 

Note: it is very important that the node ids in the graph are consistent with the node ids in the csv file and the SNP map!

## Graph reduction algorithm

### The ```merge``` method

## Graph neural network for classification